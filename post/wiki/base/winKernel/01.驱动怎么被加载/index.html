<!doctype html>
<html >
<head>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!--[if lt IE 9]>
                <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
        <![endif]-->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />

    <!-- <link rel="stylesheet" type="text/css" href="template.css" /> -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/template.css" />

    <link href="https://vjs.zencdn.net/5.4.4/video-js.css" rel="stylesheet" />

    <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
    <!-- <script type='text/javascript' src='menu/js/jquery.cookie.js'></script> -->
    <!-- <script type='text/javascript' src='menu/js/jquery.hoverIntent.minified.js'></script> -->
    <!-- <script type='text/javascript' src='menu/js/jquery.dcjqaccordion.2.7.min.js'></script> -->

    <!-- <link href="menu/css/skins/blue.css" rel="stylesheet" type="text/css" /> -->
    <!-- <link href="menu/css/skins/graphite.css" rel="stylesheet" type="text/css" /> -->
    <!-- <link href="menu/css/skins/grey.css" rel="stylesheet" type="text/css" /> -->
  
    <!-- <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
        
  
    <!-- <script src="script.js"></script> -->
  
    <!-- <script src="jquery.sticky-kit.js "></script> -->
    <script type='text/javascript' src='https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/js/jquery.cookie.js'></script>
    <script type='text/javascript' src='https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/js/jquery.hoverIntent.minified.js'></script>
    <script type='text/javascript' src='https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/js/jquery.dcjqaccordion.2.7.min.js'></script>

    <link href="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/css/skins/blue.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/css/skins/graphite.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/css/skins/grey.css" rel="stylesheet" type="text/css" />
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  
    <script src="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/script.js"></script>
  
    <script src="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/jquery.sticky-kit.js"></script>
    <meta name="generator" content="pandoc" />
  <title>wiki-base-winKernel-01.驱动怎么被加载</title>
  <style type="text/css">code{white-space: pre;}</style>
</head>
<body>

    
    <div class="navbar navbar-static-top">
    <div class="navbar-inner">
      <div class="container">
        <span class="doc-title">wiki-base-winKernel-01.驱动怎么被加载</span>
        <ul class="nav pull-right doc-info">
                            </ul>
      </div>
    </div>
  </div>
    <div class="container">
    <div class="row">
            <div id="TOC" class="span3">
        <div class="well toc">

        <ul>
        <li><a href="#驱动怎么被加载"
        id="toc-驱动怎么被加载">驱动怎么被加载</a></li>
        <li><a href="#亚洲诚信使用签名工具"
        id="toc-亚洲诚信使用签名工具">亚洲诚信使用(签名工具)</a></li>
        <li><a href="#驱动加载工具-如何加载驱动"
        id="toc-驱动加载工具-如何加载驱动">驱动加载工具
        (如何加载驱动)</a></li>
        <li><a href="#不同的操作系统该怎么加载呢"
        id="toc-不同的操作系统该怎么加载呢">不同的操作系统该怎么加载呢</a>
        <ul>
        <li><a href="#方法一-需要签名文件-win7及以上"
        id="toc-方法一-需要签名文件-win7及以上">方法一 需要签名文件
        win7及以上</a></li>
        <li><a href="#方法二-不需要签名文件-winxp"
        id="toc-方法二-不需要签名文件-winxp">方法二 不需要签名文件
        winxp</a></li>
        <li><a href="#方法三-进入-测试模式-win7"
        id="toc-方法三-进入-测试模式-win7">方法三 进入 测试模式
        win7</a></li>
        <li><a href="#方法四-关闭-强制签名-win10"
        id="toc-方法四-关闭-强制签名-win10">方法四 关闭 强制签名
        win10</a></li>
        <li><a href="#方法五-win10进入调试状态"
        id="toc-方法五-win10进入调试状态">方法五
        win10进入调试状态</a></li>
        </ul></li>
        </ul>

        </div>
      </div>
            <div class="span9">

      
      <h1 id="驱动怎么被加载">驱动怎么被加载</h1>
<h1 id="亚洲诚信使用签名工具">亚洲诚信使用(签名工具)</h1>
<p>ps: 给驱动加签名</p>
<p>可以去官网下载工具 <a
href="https://www.trustasia.com/solution/sign-tools">https://www.trustasia.com/solution/sign-tools</a></p>
<p>然后安装它,,,</p>
<p>首先我们得有一个证书文件,一般来说,后缀名是.pfx</p>
<p>比如<code>海南训英商贸有限公司.pfx</code></p>
<p>ps: 我们很难拿到证书的</p>
<p>然后我们在 亚洲诚信中导入证书</p>
<figure>
<img src="./img/Untitled.png" alt="Untitled" />
<figcaption aria-hidden="true">Untitled</figcaption>
</figure>
<p>然后</p>
<figure>
<img src="./img/Untitled%201.png" alt="Untitled" />
<figcaption aria-hidden="true">Untitled</figcaption>
</figure>
<p>那个密码和签名是配套的,是一开始就有的,</p>
<p>然后我们可以看见,签名的日期已久过了,但是我们可以修改系统的时间,,</p>
<figure>
<img src="./img/Untitled%202.png" alt="Untitled" />
<figcaption aria-hidden="true">Untitled</figcaption>
</figure>
<p>手动修改系统时间后</p>
<figure>
<img src="./img/Untitled%203.png" alt="Untitled" />
<figcaption aria-hidden="true">Untitled</figcaption>
</figure>
<p>发现签名就没有过期了</p>
<p>然后我们添加签名规则</p>
<figure>
<img src="./img/Untitled%204.png" alt="Untitled" />
<figcaption aria-hidden="true">Untitled</figcaption>
</figure>
<p>然后</p>
<figure>
<img src="./img/Untitled%205.png" alt="Untitled" />
<figcaption aria-hidden="true">Untitled</figcaption>
</figure>
<p>然后就差不多大功告成了</p>
<figure>
<img src="./img/Untitled%206.png" alt="Untitled" />
<figcaption aria-hidden="true">Untitled</figcaption>
</figure>
<p>然后我们就可以对一个驱动文件加签名了</p>
<figure>
<img src="./img/Untitled%207.png" alt="Untitled" />
<figcaption aria-hidden="true">Untitled</figcaption>
</figure>
<p>ps:
这个安装版本的亚洲诚信,,,,会注册一些右键的菜单项,,,,绿色版的,,就可能没有</p>
<h1 id="驱动加载工具-如何加载驱动">驱动加载工具 (如何加载驱动)</h1>
<p>ps:
前提是你的驱动具备被加载的能力,一般情况是不具备的,,,,也只是一般情况</p>
<p>这东西在win10中,还得是管理员的方式启动</p>
<p>我接触了2种驱动加载工具</p>
<p>大同小异,,,,</p>
<pre><code>KmdManager.exe
DriverMonitor.exe</code></pre>
<p>我们以<code>KmdManager.exe</code>为例子</p>
<p>比如我们把sys拖到工具里面</p>
<p>然后点击<code>Register</code>,然后点击<code>Run</code>就可以成功加载</p>
<p>如果要卸载的话,,,先点击<code>stop</code>,然后点击<code>Unregister</code></p>
<figure>
<img src="./img/Untitled%208.png" alt="Untitled" />
<figcaption aria-hidden="true">Untitled</figcaption>
</figure>
<h1 id="不同的操作系统该怎么加载呢">不同的操作系统该怎么加载呢</h1>
<h2 id="方法一-需要签名文件-win7及以上">方法一 需要签名文件
win7及以上</h2>
<p>这个方法..估计是g了</p>
<p>因为你得找到一个签名</p>
<p>这个签名的满足一下条件</p>
<p>1),
签名是会过期的,,所以得保证签名不过期…好像可以修改系统时间,,,来逃避这个问题</p>
<p>2),
签名不能被官方给吊销,,,意思就是官方知道这个签名已久被泄露了,,所以官方已久吊销了</p>
<p>这个签名,,,于是不可能加载成功的</p>
<p>3), 你得拥有这个签名哟</p>
<p>所以很难去获取一个签名</p>
<h2 id="方法二-不需要签名文件-winxp">方法二 不需要签名文件 winxp</h2>
<p>就是xp系统加载驱动,直接加载即可,,不需要其他的操作</p>
<h2 id="方法三-进入-测试模式-win7">方法三 进入 测试模式 win7</h2>
<p>进入测试模式下加载驱动,,是不需要签名的</p>
<p>下面指出win7下如何进入测试模式, 仅限于win7</p>
<p>管理员模式启动cmd</p>
<pre><code>bcdedit -set NOINTEGRITYCHECKS ON
bcdedit -set TESTSIGNING ON
bcdedit -set loadoptions DDISABLE_INTEGRITY_CHECKS

//关闭那个模式
//bcdedit /set testsigning off</code></pre>
<h2 id="方法四-关闭-强制签名-win10">方法四 关闭 强制签名 win10</h2>
<p>设置 –&gt; 更新和安全 –&gt; 恢复 –&gt; 立即重新启动 –&gt;
启动设置，按数字键7</p>
<p>数字7代表的选项就是 <code>禁用驱动程序强制签名</code></p>
<p>然后看看成效, 成功加载驱动并打印输出数据了</p>
<figure>
<img src="./img/Untitled%209.png" alt="Untitled" />
<figcaption aria-hidden="true">Untitled</figcaption>
</figure>
<h2 id="方法五-win10进入调试状态">方法五 win10进入调试状态</h2>
<p>其实就是win10进入调试状态下,</p>
<p>并且有windbg连接它,(必须要连接上才行)</p>
<p>windbg怎么连接虚拟机? 不是本篇文章要讲的</p>
<p>它就可以实现一个免签名的驱动加载</p>
<p>win10如何进入呢?</p>
<p>管理员模式启动cmd,重启之后就是管理员模式(临时的,再重启就没有了)</p>
<pre><code>bcdedit /debug on</code></pre>
<figure>
<img
src="驱动怎么被加载%20fbcd7649e25348929ca792332eed3bdb/Untitled%2010.png"
alt="Untitled" />
<figcaption aria-hidden="true">Untitled</figcaption>
</figure>
            </div>
    </div>
  </div>
  <script src="https://vjs.zencdn.net/5.4.4/video.js"></script>

</body>
</html>
